<!DOCTYPE html>
<html lang="en-us">
  <head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="robots" content="noodp"/>
  <meta name="author" content="Xuchao.He">
  
  
  
  <link rel="prev" href="https://ccbyte.github.io/2021/a-easy-validate/" />
  <link rel="next" href="https://ccbyte.github.io/2021/blogs-optimize/" />
  <link rel="canonical" href="https://ccbyte.github.io/2021/electron-note/" />
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="theme-color" content="#ffffff">
  <title>
       
       
           Electronå­¦ä¹ ç¬”è®° | Chao&#39;s Blog
       
  </title>
  <meta name="title" content="Electronå­¦ä¹ ç¬”è®° | Chao&#39;s Blog">
    
  
  <link rel="stylesheet" href="/font/iconfont.css">
  <link rel="stylesheet" href="/css/main.min.css">


  
  
 

<script type="application/ld+json">
 "@context" : "http://schema.org",
    "@type" : "BlogPosting",
    "mainEntityOfPage": {
         "@type": "WebPage",
         "@id": "https:\/\/ccbyte.github.io"
    },
    "articleSection" : "posts",
    "name" : "Electronå­¦ä¹ ç¬”è®°",
    "headline" : "Electronå­¦ä¹ ç¬”è®°",
    "description" : "Electron å­¦ä¹ ç¬”è®° å¯¼å›¾ åŸºæœ¬ä»‹ç» Electronä¸‰ä¸ªç»„æˆéƒ¨åˆ†  Chormium - UI   Webç”Ÿæ€å…¼å®¹æ€§  Node.js - åº•å±‚æ“ä½œ   æ–‡ä»¶è¯»å†™ï¼› ä½¿ç”¨C\u002b\u002bï¼›  Native API - è·¨å¹³å°   ç»Ÿä¸€åŸç”Ÿç•Œé¢å¦‚çª—å£ï¼Œæ‰˜ç›˜ï¼› ç³»ç»Ÿèƒ½åŠ›ï¼šNotificationï¼› åŸºç¡€èƒ½åŠ›ï¼šè½¯ä»¶æ›´æ–°\/å´©æºƒï¼›  æµè§ˆå™¨å‘å±•å² Nexusä¸–ç•Œä¸Šç¬¬ä¸€ä¸ªæµè§ˆå™¨\nMosaic - Mozilla - NetScapeï¼ˆæ‰€æœ‰æµè§ˆå™¨çš„UA(user-agent)éƒ½ä¼šå¸¦ä¸ŠMozillaï¼‰\nIE (1995 Microsoft)\nJavaScript (1995 NetScape) Brendan Eich - 10å¤©å®Œæˆï¼\nå¼€æºMozilla - ç«ç‹\nChrome (2008,æç®€ å¤šè¿›ç¨‹ v8)\nChrominum å¼€æº node.js å¼€æº v8å¼€æº\nnode-webkit (NW 2011) Githubå‰äº” - èµµæˆ ï¼ˆååŠ å…¥Github Atom é¡¹ç›®ç»„)\nAtom-shell -\u0026gt; Electron (2013-\u0026gt;2015)",
    "inLanguage" : "en-us",
    "author" : "Xuchao.He",
    "creator" : "Xuchao.He",
    "publisher": "Xuchao.He",
    "accountablePerson" : "Xuchao.He",
    "copyrightHolder" : "Xuchao.He",
    "copyrightYear" : "2021",
    "datePublished": "2021-10-24 00:00:00 \u002b0000 UTC",
    "dateModified" : "2021-10-24 00:00:00 \u002b0000 UTC",
    "url" : "https:\/\/ccbyte.github.io\/2021\/electron-note\/",
    "wordCount" : "360",
    "keywords" : [ "Electron, Node.js, JavaScript", "Chao\u0027s Blog"]
}
</script>

</head>

  


  <body class="">
    <div class="wrapper">
        <nav class="navbar">
    <div class="container">
        <div class="navbar-header header-logo">
        	<a href="javascript:void(0);" class="theme-switch"><i class="iconfont icon-xihuan"></i></a>&nbsp;<a href="https://ccbyte.github.io">Chao&#39;s Blog</a>
        </div>
        <div class="menu navbar-right">
                
                
                <a class="menu-item" href="/posts/" title="">Blog</a>
                
                <a class="menu-item" href="/categories/" title="">Categories</a>
                
                <a class="menu-item" href="/tags/" title="">Tags</a>
                
                <a class="menu-item" href="/about/" title="">About</a>
                
                <a class="menu-item" href="/more/" title="More">More</a>
                
        </div>
    </div>
</nav>
<nav class="navbar-mobile" id="nav-mobile" style="display: none">
     <div class="container">
        <div class="navbar-header">
            <div>  <a href="javascript:void(0);" class="theme-switch"><i class="iconfont icon-xihuan"></i></a>&nbsp;<a href="https://ccbyte.github.io">Chao&#39;s Blog</a></div>
            <div class="menu-toggle">
                <span></span><span></span><span></span>
            </div>
        </div>
     
          <div class="menu" id="mobile-menu">
                
                
                <a class="menu-item" href="/posts/" title="">Blog</a>
                
                <a class="menu-item" href="/categories/" title="">Categories</a>
                
                <a class="menu-item" href="/tags/" title="">Tags</a>
                
                <a class="menu-item" href="/about/" title="">About</a>
                
                <a class="menu-item" href="/more/" title="More">More</a>
                
        </div>
    </div>
</nav>
    	 <main class="main">
          <div class="container">
      		
<article class="post-warp" itemscope itemtype="http://schema.org/Article">
    <header class="post-header">
        <h1 class="post-title" itemprop="name headline">Electronå­¦ä¹ ç¬”è®°</h1>
        <div class="post-meta">
                Written by <a itemprop="name" href="https://ccbyte.github.io" rel="author">Xuchao.He</a> with â™¥ 
                <span class="post-time">
                on <time datetime=2021-10-24 itemprop="datePublished">October 24, 2021</time>
                </span>
                in
                <i class="iconfont icon-folder"></i>
                <span class="post-category">
                        <a href="https://ccbyte.github.io/categories/front-end/"> Front End </a>
                        
                </span>
        </div>
    </header>
    
          <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title"></h2>
  
  <div class="post-toc-content always-active">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#å¯¼å›¾">å¯¼å›¾</a></li>
    <li><a href="#åŸºæœ¬ä»‹ç»">åŸºæœ¬ä»‹ç»</a>
      <ul>
        <li><a href="#electronä¸‰ä¸ªç»„æˆéƒ¨åˆ†">Electronä¸‰ä¸ªç»„æˆéƒ¨åˆ†</a></li>
        <li><a href="#æµè§ˆå™¨å‘å±•å²">æµè§ˆå™¨å‘å±•å²</a></li>
        <li><a href="#electronåº”ç”¨æœ€å°ç»„æˆ">Electronåº”ç”¨æœ€å°ç»„æˆ</a></li>
      </ul>
    </li>
    <li><a href="#æ¶æ„å’ŒåŸç†">æ¶æ„å’ŒåŸç†</a>
      <ul>
        <li><a href="#chromiumæ¶æ„">Chromiumæ¶æ„</a></li>
        <li><a href="#electronæ¶æ„">Electronæ¶æ„</a></li>
        <li><a href="#nodejså’Œchromiumsæ•´åˆ">Node.jså’ŒChromiumsæ•´åˆ</a></li>
      </ul>
    </li>
    <li><a href="#æ¡Œé¢ç«¯æŠ€æœ¯é€‰å‹">æ¡Œé¢ç«¯æŠ€æœ¯é€‰å‹</a></li>
    <li><a href="#å¼€å‘ç¯å¢ƒå‡†å¤‡">å¼€å‘ç¯å¢ƒå‡†å¤‡</a></li>
    <li><a href="#å¼€å‘ä¸€ä¸ªç•ªèŒ„é’Ÿ">å¼€å‘ä¸€ä¸ªç•ªèŒ„é’Ÿ</a>
      <ul>
        <li><a href="#å¼•å…¥æ¨¡å—">å¼•å…¥æ¨¡å—</a></li>
        <li><a href="#ç¬¬ä¸‰æ–¹åº“">ç¬¬ä¸‰æ–¹åº“</a></li>
      </ul>
    </li>
    <li><a href="#ä¸webå¼€å‘å¼‚åŒ">ä¸Webå¼€å‘å¼‚åŒ</a>
      <ul>
        <li><a href="#ä¸€ä¸»è¿›ç¨‹ä¸æ¸²æŸ“è¿›ç¨‹">ä¸€ã€ä¸»è¿›ç¨‹ä¸æ¸²æŸ“è¿›ç¨‹</a></li>
        <li><a href="#äºŒè¿›ç¨‹é—´é€šä¿¡">äºŒã€è¿›ç¨‹é—´é€šä¿¡</a></li>
        <li><a href="#ä¸‰nativeåŠåŸç”Ÿgui">ä¸‰ã€NativeåŠåŸç”ŸGUI</a></li>
        <li><a href="#å››é‡Šæ”¾å‰ç«¯æƒ³è±¡åŠ›">å››ã€é‡Šæ”¾å‰ç«¯æƒ³è±¡åŠ›</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
<script type="text/javascript">
  window.onload = function () {
    var fix = $('.post-toc');
    var end = $('.post-comment');
    var fixTop = fix.offset().top, fixHeight = fix.height();
    var endTop, miss;
    var offsetTop = fix[0].offsetTop;
    $(window).scroll(function () {
      var docTop = Math.max(document.body.scrollTop, document.documentElement.scrollTop);
      if (end.length > 0) {
        endTop = end.offset().top;
        miss = endTop - docTop - fixHeight;
      }
      if (fixTop < docTop) {
        fix.css({ 'position': 'fixed' });
        if ((end.length > 0) && (endTop < (docTop + fixHeight))) {
          fix.css({ top: miss });
        } else {
          fix.css({ top: 0 });
        }
      } else {
        fix.css({ 'position': 'absolute' });
        fix.css({ top: offsetTop });
      }
    })
  }
</script> 
	
    <div class="post-content">
        

        
            
        

        
        
     
          
          
          

          
          
          

          <h1 id="electron-å­¦ä¹ ç¬”è®°">Electron å­¦ä¹ ç¬”è®°</h1>
<h2 id="å¯¼å›¾">å¯¼å›¾</h2>
<p><img src="https://i.loli.net/2021/11/13/JrhlMv93CXYHpzQ.png" alt=""></p>
<h2 id="åŸºæœ¬ä»‹ç»">åŸºæœ¬ä»‹ç»</h2>
<h3 id="electronä¸‰ä¸ªç»„æˆéƒ¨åˆ†">Electronä¸‰ä¸ªç»„æˆéƒ¨åˆ†</h3>
<ol>
<li><strong>Chormium - UI</strong></li>
</ol>
<ul>
<li>Webç”Ÿæ€å…¼å®¹æ€§</li>
</ul>
<ol start="2">
<li><strong>Node.js - åº•å±‚æ“ä½œ</strong></li>
</ol>
<ul>
<li>æ–‡ä»¶è¯»å†™ï¼›</li>
<li>ä½¿ç”¨C++ï¼›</li>
</ul>
<ol start="3">
<li><strong>Native API - è·¨å¹³å°</strong></li>
</ol>
<ul>
<li>ç»Ÿä¸€åŸç”Ÿç•Œé¢å¦‚çª—å£ï¼Œæ‰˜ç›˜ï¼›</li>
<li>ç³»ç»Ÿèƒ½åŠ›ï¼šNotificationï¼›</li>
<li>åŸºç¡€èƒ½åŠ›ï¼šè½¯ä»¶æ›´æ–°/å´©æºƒï¼›</li>
</ul>
<h3 id="æµè§ˆå™¨å‘å±•å²">æµè§ˆå™¨å‘å±•å²</h3>
<p>Nexusä¸–ç•Œä¸Šç¬¬ä¸€ä¸ªæµè§ˆå™¨</p>
<p>Mosaic - Mozilla - NetScapeï¼ˆæ‰€æœ‰æµè§ˆå™¨çš„UA<font color="#aaa" size="2">(user-agent)</font>éƒ½ä¼šå¸¦ä¸ŠMozillaï¼‰</p>
<p>IE (1995 Microsoft)</p>
<p>JavaScript (1995 NetScape) Brendan Eich - 10å¤©å®Œæˆï¼</p>
<p>å¼€æºMozilla - ç«ç‹</p>
<p>Chrome (2008,æç®€ å¤šè¿›ç¨‹ v8)</p>
<p>Chrominum å¼€æº node.js å¼€æº v8å¼€æº</p>
<p>node-webkit (NW 2011) Githubå‰äº” - èµµæˆ ï¼ˆååŠ å…¥Github Atom é¡¹ç›®ç»„)</p>
<p>Atom-shell  -&gt; Electron (2013-&gt;2015)</p>
<blockquote>
<p>åˆ¤åˆ«æ˜¯å¦Electronåº”ç”¨ï¼š</p>
<p>é¡¹ç›®ç›®å½•ä¸‹ Contents/Framework ä¸‹æ˜¯å¦æœ‰Electron</p>
</blockquote>
<h3 id="electronåº”ç”¨æœ€å°ç»„æˆ">Electronåº”ç”¨æœ€å°ç»„æˆ</h3>
<p>index.html é¡µé¢</p>
<p>package.json åŒ…ä½“æè¿°</p>
<p>main.js ç®¡ç†æ•´ä¸ªåº”ç”¨</p>
<h2 id="æ¶æ„å’ŒåŸç†">æ¶æ„å’ŒåŸç†</h2>
<h3 id="chromiumæ¶æ„">Chromiumæ¶æ„</h3>
<p><img src="https://i.loli.net/2021/11/13/PHTq1pKvuUyijNe.png" alt=""></p>
<p>IPCè·¨è¿›ç¨‹é€šä¿¡ ï¼ˆä¸»è¿›ç¨‹RenderProcessHostï¼ŒRendererè¿›ç¨‹RenderProcessï¼‰</p>
<p>ResourceDispatcheré¡µé¢è¯·æ±‚èµ„æºè½¬å‘åˆ°IPC  Browserå¤„ç†å†è¿”å›</p>
<h3 id="electronæ¶æ„">Electronæ¶æ„</h3>
<p><img src="https://i.loli.net/2021/11/13/89zRApQhS3Eo6DP.png" alt=""></p>
<h3 id="nodejså’Œchromiumsæ•´åˆ">Node.jså’ŒChromiumsæ•´åˆ</h3>
<p>éš¾ç‚¹ï¼šäº‹ä»¶å¾ªç¯ï¼ˆNode.jsåŸºäºlibuvï¼ŒChromiumåŸºäºmessage bumpï¼‰</p>
<ul>
<li>Chromiumé›†æˆåˆ°Node.js ï¼Œç”¨libuvå®ç°messagebump(NW) ã€NSRunLoop glib è¾¹ç•Œæƒ…å†µã€‘</li>
<li>Node.jsé›†æˆåˆ°Chromiumã€libuvè½®è¯¢backend_fdã€‘</li>
</ul>
<p><img src="https://i.loli.net/2021/11/13/shuEibU4Q6YL3fG.png" alt=""></p>
<p>å»¶ç”³èµ„æ–™</p>
<p><img src="https://i.loli.net/2021/11/13/wgdMLeOtpraU7A3.png" alt=""></p>
<h2 id="æ¡Œé¢ç«¯æŠ€æœ¯é€‰å‹">æ¡Œé¢ç«¯æŠ€æœ¯é€‰å‹</h2>
<p>å…¥å£å¿«æ·</p>
<p>ç¦»çº¿å¯ç”¨</p>
<p>è°ƒç”¨ç³»ç»Ÿèƒ½åŠ›ï¼ˆé€šçŸ¥ï¼Œç¡¬ä»¶ï¼‰</p>
<p>å®‰å…¨éœ€æ±‚ï¼ˆé‡‘èï¼‰</p>
<p>Native(C++/C#/Objective-c)</p>
<p>é«˜æ€§èƒ½ï¼ŒåŸç”Ÿï¼Œä½“ç§¯å°ï¼›é—¨æ§›é«˜</p>
<p>QT(C++)</p>
<p>è·¨å¹³å°ï¼Œé«˜æ€§èƒ½ï¼Œåª²ç¾åŸç”Ÿï¼›é—¨æ§›é«˜ï¼Œè¿­ä»£é€Ÿåº¦ä¸€èˆ¬</p>
<p>Flutter</p>
<p>å‘å±•ä¸­ï¼ŒåŸºå»ºå°‘</p>
<p>Nw.js ï¼ˆå¾®ä¿¡å¼€å‘è€…å·¥å…·ï¼‰</p>
<p>æ”¯æŒXPï¼Œæºç åŠ å¯†ï¼Œæ”¯æŒæ‰©å±•ï¼›åŒ…ä½“ç§¯å¤§ï¼Œæ€§èƒ½ä¸€èˆ¬</p>
<p>Electron</p>
<p>åŒ…ä½“ç§¯å¤§ï¼Œæ€§èƒ½ä¸€èˆ¬</p>
<p>Carloï¼ŒWPFï¼ŒChromium Embedded Frameworkï¼ŒPWA</p>
<h2 id="å¼€å‘ç¯å¢ƒå‡†å¤‡">å¼€å‘ç¯å¢ƒå‡†å¤‡</h2>
<p>å®‰è£… vscodeï¼Œnodejs(NVM)ã€è·³è¿‡ã€‘</p>
<p>å®‰è£… Electronï¼š</p>
<p><code>npm install electron --save-dev</code></p>
<p><code>npm install --arch=ia32 --platform=win32 electron</code>  (32ä½æ‰“åŒ…ï¼Œåœ¨32,64éƒ½èƒ½ç”¨)</p>
<p>éªŒè¯å®‰è£…æˆåŠŸ</p>
<p><code>npx electron -v</code></p>
<p><code>./node_modules/.bin/electron -v</code></p>
<h2 id="å¼€å‘ä¸€ä¸ªç•ªèŒ„é’Ÿ">å¼€å‘ä¸€ä¸ªç•ªèŒ„é’Ÿ</h2>
<p>ä¼‘æ¯5åˆ†é’Ÿå¼¹å‡ºä¼‘æ¯ç»“æŸ</p>
<p>åº”ç”¨å¯åŠ¨ â†’ å€’è®¡æ—¶å·¥ä½œ25åˆ†é’Ÿ â†’ å¼¹å‡ºæ˜¯å¦ä¼‘æ¯â†’ä¼‘æ¯åˆ™5åˆ†é’Ÿå€’è®¡æ—¶åç»“æŸâ†’ä¸ä¼‘æ¯åˆ™é‡æ–°å¼€å§‹25åˆ†é’Ÿ</p>
<p><img src="https://i.loli.net/2021/11/13/1B3YZLaqrF7zOu4.png" alt=""></p>
<h3 id="å¼•å…¥æ¨¡å—">å¼•å…¥æ¨¡å—</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">const</span> { <span style="color:#a6e22e">app</span>, <span style="color:#a6e22e">BrowserWindow</span> } <span style="color:#f92672">=</span> <span style="color:#a6e22e">require</span>(<span style="color:#e6db74">&#39;electron&#39;</span>)
</code></pre></div><p>å¯ä»¥å…ˆé˜…è¯»&amp;æ“ä½œä¸€éå®˜æ–¹çš„<a href="https://www.electronjs.org/zh/docs/latest/tutorial/quick-start">å¿«é€Ÿå¼€å§‹æ–‡æ¡£</a></p>
<h3 id="ç¬¬ä¸‰æ–¹åº“">ç¬¬ä¸‰æ–¹åº“</h3>
<p><a href="https://github.com/husa/timer.js/">timer.js</a></p>
<h4 id="å®‰è£…">å®‰è£…</h4>
<p><code>npm install timer.js</code></p>
<h4 id="å¼•å…¥">å¼•å…¥</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">myTimer</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Timer</span>({
	<span style="color:#a6e22e">onTick</span><span style="color:#f92672">:</span>() =&gt; {}
    <span style="color:#a6e22e">onEnd</span><span style="color:#f92672">:</span> () =&gt; {}
})
</code></pre></div><h4 id="ä½¿ç”¨">ä½¿ç”¨</h4>
<h2 id="ä¸webå¼€å‘å¼‚åŒ">ä¸Webå¼€å‘å¼‚åŒ</h2>
<h3 id="ä¸€ä¸»è¿›ç¨‹ä¸æ¸²æŸ“è¿›ç¨‹">ä¸€ã€ä¸»è¿›ç¨‹ä¸æ¸²æŸ“è¿›ç¨‹</h3>
<p>ä¸»è¿›ç¨‹ï¼ˆå”¯ä¸€ï¼‰</p>
<ul>
<li>package.jsonä¸­mainè„šæœ¬çš„è¿›ç¨‹</li>
<li>ç®¡ç†åŸç”ŸGUI(BrowserWindowã€Trayã€Dockã€Menu)</li>
<li>åˆ›å»ºæ¸²æŸ“è¿›ç¨‹ï¼Œæ§åˆ¶åº”ç”¨ç”Ÿå‘½å‘¨æœŸ(app)</li>
</ul>
<p>æ¸²æŸ“è¿›ç¨‹ï¼ˆå¤šä¸ªï¼‰</p>
<ul>
<li>å±•ç¤ºWebé¡µé¢çš„è¿›ç¨‹</li>
<li>é€šè¿‡Node.jsã€Electronæä¾›çš„APIè·Ÿç³»ç»Ÿåº•å±‚æ‰“äº¤é“</li>
</ul>
<p><img src="https://i.loli.net/2021/11/13/aCwW3I48t5MOiSR.png" alt=""></p>
<table>
<thead>
<tr>
<th>ä¸»è¿›ç¨‹</th>
<th>æ¸²æŸ“è¿›ç¨‹</th>
<th>äº¤å‰</th>
</tr>
</thead>
<tbody>
<tr>
<td>appç®¡ç†åº”ç”¨ç”Ÿå‘½å‘¨æœŸ(é€€å‡º)ï¼Œè®¾ç½®å±æ€§(Dock)</td>
<td>ipcRendererï¼ˆè·ŸipcMainè¿›è¡ŒIPCé€šä¿¡ï¼‰</td>
<td>clipboardå‰ªåˆ‡æ¿</td>
</tr>
<tr>
<td>BrowserWindowç®¡ç†çª—å£</td>
<td>remoteè°ƒç”¨ä¸»è¿›ç¨‹æ¨¡å—ï¼ˆå»ºè®®ä¸ç”¨ï¼‰</td>
<td>crashReporterç›‘å¬è¿›ç¨‹</td>
</tr>
<tr>
<td>ipcMainï¼ˆè·ŸipcRendererè¿›è¡ŒIPCé€šä¿¡ï¼‰</td>
<td>desktopCaptureç³»ç»Ÿæˆªå›¾/è§†é¢‘æµ</td>
<td></td>
</tr>
<tr>
<td>Menu/Tray/MenuItem/dialog/NotificationåŸç”ŸGUI</td>
<td></td>
<td></td>
</tr>
<tr>
<td>webContentsåŠ è½½å…·ä½“é¡µé¢</td>
<td></td>
<td></td>
</tr>
<tr>
<td>autoUpdateræ›´æ–°æ¨¡å—</td>
<td></td>
<td></td>
</tr>
<tr>
<td>globalShortcutè®¾ç½®å…¨å±€å¿«æ·é”®</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="äºŒè¿›ç¨‹é—´é€šä¿¡">äºŒã€è¿›ç¨‹é—´é€šä¿¡</h3>
<ul>
<li>é€šçŸ¥äº‹ä»¶ï¼ˆåˆ›å»ºåŸç”Ÿèœå•åªæœ‰ä¸»è¿›ç¨‹èƒ½åšï¼‰</li>
<li>æ•°æ®ä¼ è¾“ï¼ˆåœ¨æŸé¡µé¢è·å¾—å†…å­˜æƒ…å†µï¼‰</li>
<li>å…±äº«æ•°æ®ï¼ˆç”¨æˆ·ä¿¡æ¯åœ¨å„ä¸ªè¿›ç¨‹ä¸­å…±ç”¨ï¼‰</li>
</ul>
<h4 id="ipcæ¨¡å—é€šä¿¡">IPCæ¨¡å—é€šä¿¡</h4>
<p>Electronæä¾›çš„IPCé€šä¿¡æ¨¡å—ï¼šä¸»è¿›ç¨‹ipcMainã€æ¸²æŸ“è¿›ç¨‹ipcRendererï¼ˆä¸¤è€…éƒ½æ˜¯EventEmitterå¯¹è±¡ï¼‰</p>
<h4 id="ä»æ¸²æŸ“è¿›ç¨‹åˆ°ä¸»è¿›ç¨‹">ä»æ¸²æŸ“è¿›ç¨‹åˆ°ä¸»è¿›ç¨‹</h4>
<ul>
<li>
<p>Callbackå†™æ³•</p>
<ul>
<li>ipcRenderer.send(channel, &hellip;args)</li>
<li>ipcMain.on(channel, handler)</li>
</ul>
</li>
<li>
<p>Promiseå†™æ³•ï¼ˆElectron7.0ä¹‹åï¼Œå¤„ç†è¯·æ±‚+å“åº”æ¨¡å¼ï¼‰</p>
<ul>
<li>ipcRenderer.invoke(channel, &hellip;args)</li>
<li>ipcMain.handle(channel, handler)</li>
</ul>
</li>
</ul>
<h4 id="ä»ä¸»è¿›ç¨‹åˆ°æ¸²æŸ“è¿›ç¨‹">ä»ä¸»è¿›ç¨‹åˆ°æ¸²æŸ“è¿›ç¨‹</h4>
<ul>
<li>ä¸»è¿›ç¨‹é€šçŸ¥æ¸²æŸ“è¿›ç¨‹
<ul>
<li>ipcRenderer.on(channel, handler)</li>
<li>webContents.send(channel) [BroswerWindow]</li>
</ul>
</li>
</ul>
<h4 id="é¡µé¢é—´æ¸²æŸ“è¿›ç¨‹ä¸æ¸²æŸ“è¿›ç¨‹é€šä¿¡">é¡µé¢é—´ï¼ˆæ¸²æŸ“è¿›ç¨‹ä¸æ¸²æŸ“è¿›ç¨‹ï¼‰é€šä¿¡</h4>
<ul>
<li>é€šçŸ¥äº‹ä»¶
<ul>
<li>é€šè¿‡ä¸»è¿›ç¨‹è½¬å‘ï¼ˆElectron 5ä¹‹å‰ï¼‰</li>
<li>ipcRenderer.sendToï¼ˆElectron 5ä¹‹åï¼‰</li>
</ul>
</li>
<li>æ•°æ®å…±äº«
<ul>
<li>webæŠ€æœ¯ï¼ˆlocalStorageã€sessionStorageã€indexedDBï¼‰</li>
<li><font color=#ccc>ä½¿ç”¨remote</font></li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">
<span style="color:#75715e">// main.js
</span><span style="color:#75715e">// new win1 &amp; win2 instanceof BrowserWindow and loadFile
</span><span style="color:#75715e"></span><span style="color:#a6e22e">global</span>.<span style="color:#a6e22e">sharedObject</span> <span style="color:#f92672">=</span> {
	<span style="color:#a6e22e">win2WebContentsId</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">win2</span>.<span style="color:#a6e22e">webContents</span>.<span style="color:#a6e22e">id</span> <span style="color:#75715e">// ä¼ è¾“webContents.id
</span><span style="color:#75715e"></span>}

<span style="color:#75715e">// renderer1.js
</span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> { <span style="color:#a6e22e">ipcRenderer</span>, <span style="color:#a6e22e">remote</span> } <span style="color:#f92672">=</span> <span style="color:#a6e22e">require</span>(<span style="color:#e6db74">&#39;electron&#39;</span>)
<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">sharedObject</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">remote</span>.<span style="color:#a6e22e">getGlobal</span>(<span style="color:#e6db74">&#39;sharedObject&#39;</span>)
<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">win2WebContentsId</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">sharedObject</span>.<span style="color:#a6e22e">win2WebContentsId</span>
<span style="color:#a6e22e">ipcRenderer</span>.<span style="color:#a6e22e">sendTo</span>(<span style="color:#a6e22e">win2WebContentsId</span>, <span style="color:#e6db74">&#39;do-some-work&#39;</span>, <span style="color:#ae81ff">1</span>)

<span style="color:#75715e">// renderer2.js
</span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> { <span style="color:#a6e22e">ipcRenderer</span> } <span style="color:#f92672">=</span> <span style="color:#a6e22e">require</span>(<span style="color:#e6db74">&#39;electron&#39;</span>)
<span style="color:#a6e22e">ipcRenderer</span>.<span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#39;do-some-work&#39;</span>, (<span style="color:#a6e22e">e</span>, <span style="color:#a6e22e">a</span>) =&gt; {
    <span style="color:#a6e22e">alert</span>(<span style="color:#e6db74">&#39;renderer2 handle some work&#39;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">a</span>)
})
</code></pre></div><h4 id="å‘">å‘ğŸ•³</h4>
<ul>
<li>å°‘ç”¨remoteæ¨¡å—ï¼ˆå¥½å†™ï¼Œä½†è§¦å‘åº•å±‚IPCé€šä¿¡äº‹ä»¶ï¼Œæ€§èƒ½å¼€é”€å¤§ï¼Œæ˜“å¡æ­»ï¼‰</li>
<li>ä¸è¦ç”¨syncæ¨¡å¼ï¼ˆipcRendererçš„æ–¹æ³•ï¼Œæ˜“å¡æ­»ï¼‰</li>
<li>åœ¨è¯·æ±‚+å“åº”çš„é€šä¿¡æ¨¡å¼ä¸‹ï¼Œéœ€è¦è‡ªå®šä¹‰è¶…æ—¶é™åˆ¶</li>
</ul>
<h3 id="ä¸‰nativeåŠåŸç”Ÿgui">ä¸‰ã€NativeåŠåŸç”ŸGUI</h3>
<h4 id="ä½¿ç”¨electron-apiåˆ›å»ºåŸç”Ÿgui">ä½¿ç”¨Electron APIåˆ›å»ºåŸç”ŸGUI</h4>
<ul>
<li>BrowserWindow åº”ç”¨çª—å£</li>
<li>Tray æ‰˜ç›˜</li>
<li>appè®¾ç½®dock.badgeï¼ˆæœªè¯»æ•°ï¼‰</li>
<li>Menuèœå•</li>
<li>dialogåŸç”Ÿå¼¹æ¡†</li>
<li>TouchBarè‹¹æœè§¦æ§æ¿</li>
</ul>
<h4 id="ä½¿ç”¨electron-apiè·å¾—åº•å±‚èƒ½åŠ›">ä½¿ç”¨Electron APIè·å¾—åº•å±‚èƒ½åŠ›</h4>
<ul>
<li>clipboard</li>
<li>globalShortcut å…¨å±€å¿«æ·é”®</li>
<li>desktopCapture æ•è·æ¡Œé¢</li>
<li>shellæ‰“å¼€æ–‡ä»¶ã€URL</li>
<li>&hellip;</li>
</ul>
<h4 id="ä½¿ç”¨nodejsè·å¾—åº•å±‚èƒ½åŠ›">ä½¿ç”¨Node.jsè·å¾—åº•å±‚èƒ½åŠ›</h4>
<ul>
<li>Electron åŒæ—¶åœ¨ä¸»è¿›ç¨‹å’Œæ¸²æŸ“è¿›ç¨‹ä¸­å¯¹Node.jsæš´éœ²äº†æ‰€æœ‰çš„æ¥å£
<ul>
<li>fsè¿›è¡Œæ–‡ä»¶è¯»å†™</li>
<li>cryptoè¿›è¡ŒåŠ è§£å¯†</li>
</ul>
</li>
<li>é€šè¿‡npmå®‰è£…ç¤¾åŒºä¸Šæ‰€æœ‰çš„Node.jsåº“</li>
</ul>
<p>ğŸŒ°</p>
<p>ä½¿ç”¨node.jsçš„fsæ¨¡å—æ‰“å°æ–‡ä»¶å†…å®¹</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">mainWindow</span>.<span style="color:#a6e22e">webContents</span>.<span style="color:#a6e22e">openDevTools</span>() <span style="color:#75715e">// ä¸»è¿›ç¨‹æ‰“å¼€å¼€å‘å·¥å…·
</span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">require</span>(<span style="color:#e6db74">&#39;fs&#39;</span>).<span style="color:#a6e22e">readFileSync</span>(<span style="color:#e6db74">&#39;./index.html&#39;</span>, <span style="color:#e6db74">&#39;utf-8&#39;</span>) <span style="color:#75715e">// å¼€å‘å·¥å…·çš„consoleä¸­æ‰§è¡Œ
</span></code></pre></div><h4 id="ä½¿ç”¨nodejsè°ƒç”¨åŸç”Ÿæ¨¡å—">ä½¿ç”¨Node.jsè°ƒç”¨åŸç”Ÿæ¨¡å—</h4>
<p>node.js add-on</p>
<p>node-ffi (Foreign Function Interface)</p>
<h4 id="è°ƒç”¨osèƒ½åŠ›">è°ƒç”¨OSèƒ½åŠ›</h4>
<ul>
<li>winRTï¼ˆè°ƒç”¨è“ç‰™ç­‰ï¼‰</li>
<li>Applescriptï¼ˆè‹¹æœç³»ç»Ÿï¼‰</li>
<li>Shellï¼ˆnode.js child_processï¼‰</li>
</ul>
<h4 id="electronèƒ½åŠ›">Electronèƒ½åŠ›</h4>
<p><img src="https://i.loli.net/2021/11/13/kWbyjTlwS71KrPL.png" alt=""></p>
<h3 id="å››é‡Šæ”¾å‰ç«¯æƒ³è±¡åŠ›">å››ã€é‡Šæ”¾å‰ç«¯æƒ³è±¡åŠ›</h3>
<ul>
<li>
<p>ä¸ç”¨å…¼å®¹Safariã€IE</p>
<ul>
<li>babelä¸­è®¾ç½®targetsä¸ºElectronå¯¹åº”çš„Chromeç‰ˆæœ¬</li>
</ul>
</li>
<li>
<p>å¤§èƒ†ä½¿ç”¨Chromeæœ€æ–°æ”¯æŒçš„API ã€<a href="https://developers.google.com/web/updates">æ–‡æ¡£åœ°å€</a>ã€‘</p>
<ul>
<li><a href="https://mathiasbynens.be/demo/img-loading-lazy">åŸç”ŸLazyLoad </a></li>
<li>ES 6/7/8/9/10é«˜çº§è¯­æ³•
<ul>
<li>async await / Promise</li>
<li>String/Array/Objecté«˜çº§ç”¨æ³•</li>
<li>BigIntï¼ˆå¤„ç†å¤§æ•°ä¸ç”¨å†å¼•ç”¨long.jså•¦ï¼‰</li>
</ul>
</li>
</ul>
</li>
<li>
<p>æ— è·¨åŸŸé—®é¢˜ï¼ˆä½¿ç”¨Node.jså‘é€è¯·æ±‚ã€ä½¿ç”¨Electron netå‘é€è¯·æ±‚ï¼‰</p>
</li>
<li>
<p>æ“ä½œæœ¬åœ°æ–‡ä»¶</p>
</li>
<li>
<p>æ›´å¥½ç”¨çš„æœ¬åœ°DBï¼ˆLowDB, LevelDB, SQLiteï¼‰</p>
</li>
<li>
<p>å¤šçº¿ç¨‹ã€å¤šè¿›ç¨‹å¹¶è¡Œï¼ˆNode.js: worker + child_processï¼‰</p>
</li>
</ul>

    </div>

    <div class="post-copyright">
             
            <p class="copyright-item">
                <span>Author:</span>
                <span>Xuchao.He </span>
                </p>
            
           
             
            <p class="copyright-item">
                    <span>Link:</span>
                    <a href=https://ccbyte.github.io/2021/electron-note/>https://ccbyte.github.io/2021/electron-note/</span>
            </p>
            
             
            <p class="copyright-item lincese">
                æœ¬æ–‡é‡‡ç”¨<a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/" target="_blank">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨ 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯
            </p>
            
    </div>

  
    <div class="post-tags">
        
            <section>
            <i class="iconfont icon-tag"></i>Tag(s): 
            
            <span class="tag"><a href="https://ccbyte.github.io/tags/electron-node.js-javascript/">
                    #Electron, Node.js, JavaScript</a></span>
            
            </section>
        
        <section>
                <a href="javascript:window.history.back();">back</a></span> Â· 
                <span><a href="https://ccbyte.github.io">home</a></span>
        </section>
    </div>

    <div class="post-nav">
        
        <a href="https://ccbyte.github.io/2021/a-easy-validate/" class="prev" rel="prev" title="å®ç°ç®€å•çš„è¡¨å•æ•°æ®æ ¡éªŒåŠŸèƒ½"><i class="iconfont icon-left"></i>&nbsp;å®ç°ç®€å•çš„è¡¨å•æ•°æ®æ ¡éªŒåŠŸèƒ½</a>
         
        
        <a href="https://ccbyte.github.io/2021/blogs-optimize/" class="next" rel="next" title="Hugoåšå®¢/Leaveitä¸»é¢˜ä¼˜åŒ–">Hugoåšå®¢/Leaveitä¸»é¢˜ä¼˜åŒ–&nbsp;<i class="iconfont icon-right"></i></a>
        
    </div>

    <div class="post-comment">
          
                 
          
          
          
  


<div class="post bg-white">
    <script src="https://utteranc.es/client.js"
          repo="ccbyte/blog_comments"
          issue-term="pathname"
          theme="github-light"
          crossorigin="anonymous"
          async>
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://github.com/utterance">comments powered by utterances.</a></noscript>
</div>
    </div>
</article>
          </div>
		   </main>
      <footer class="footer">
    <div class="copyright">
        &copy;
        
        <span itemprop="copyrightYear">2011 - 2022</span>
        
        <span class="with-love">
    	 <i class="iconfont icon-love"></i> 
         </span>
         
            <span class="author" itemprop="copyrightHolder"><a href="https://ccbyte.github.io">Xuchao.He</a> | </span> 
         

         
		  <span>Powered by <a href="https://gohugo.io/" target="_blank" rel="external nofollow">Hugo</a> & <a href="https://github.com/liuzc/leaveit" target="_blank" rel="external nofollow">LeaveIt</a></span> 
    </div>
</footer>












    
     <link href="//lib.baomitu.com/lightgallery/1.6.11/css/lightgallery.min.css" rel="stylesheet">  
      
     <script src="/js/vendor_gallery.min.js" async="" ></script>
    
  



     </div>
  </body>
</html>
